## Dataset-Generator
### File Structure
|file|Purpose|Usage|
|---|---|---|
|**json**|Input files directly from the HouseExpo dataset|
|**out**|Generated output from stl_generator and raster2json|
|**(NUMBER).txt files**|Files used to specify what data from the json folder to use. Generated by split_generator.py|
|**split_generator.py**|Run to generate a NUMBER.txt file that contains a random split of data|python3 split_generator.py ***enter split size when prompted. File will be generated in same directory*** |
|**raster2json.py**|Run to generate JSON and PNG data from a specified NUMBER.txt file|python3 raster2json.py ***enter NUMBER.txt filename when prompted***|
|**stl_generator.py**|Run to generate STL files from a specified NUMBER.txt file|python3 stl_generator.py ***enter NUMBER.txt filename when prompted***
### How it Works
The HouseExpo dataset stores information stored in JSON format with information such as bounding boxes, and room labels, which can then be used to extract low level information directly. However, to extract most higher level information, the original image must be reconstructed using included vertex and bounding box information.
![Graphical Representation](https://lh3.googleusercontent.com/ChS_nYD95jA_DkZ2cyrGLSKmn7B04kjQmjtwwU814HvmALkybgnZuc7OOZOsO0GwxKRBrWPht7fwPA "Graph Representation")
 - Room connectivity is found by selectively masking the drawn image for 2 rooms at a time and counting the number of connected components, which should be 1 if two rooms are connected, or 2 if not.
 - To determine room orientation for connected rooms, we convolve 4 times with kernels responsive to north, south, east, and west facing boundaries, selecting whichever one returns the most matches
 - Square footage is found by counting the number of pixels making up each room
 ### Generated Data Format
 Floorplan data is stored in up to 3 files for each floorplan: PNG, JSON, and STL
 - PNG and STL files are stored normally and can be viewed using an image viewer and STL compatible software
 - The JSON file is stored in the following way:

{
> *NODE_ID*:  {
> > 
> > "connected": [*LIST OF NODE_ID*], 
> >  "square_footage": *INT*, 
>  >"label": *STRING*
>  
> }
>  ...*More NODE_IDs in same format*
}

